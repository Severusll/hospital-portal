import{d as D}from"./index-BzuWEWO5.js";import{_ as I,r as f,m as N,c as v,a as k,d as l,w as a,e as r,f as w,g as c,E as V}from"./index-BkG967Cb.js";const x={class:"page"},S={__name:"Appointment",setup(U){const d=f(),m=f(!1),t=N({patientName:"",phone:"",department:"",doctorId:"",appointmentDate:"",timeSlot:"",symptoms:""}),_={patientName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1\d{10}$/,message:"手机号格式不正确",trigger:"blur"}],appointmentDate:[{required:!0,message:"请选择日期",trigger:"change"}]},g=()=>{d.value.validate(async u=>{if(u){m.value=!0;try{const e={...t,doctorId:t.doctorId?Number(t.doctorId):null,appointmentDate:t.appointmentDate?new Date(t.appointmentDate).toISOString().slice(0,10):""};await D(e),V.success("预约成功"),s()}catch(e){V.error(e.message||"预约失败")}finally{m.value=!1}}})},s=()=>{Object.assign(t,{patientName:"",phone:"",department:"",doctorId:"",appointmentDate:"",timeSlot:"",symptoms:""})};return(u,e)=>{const p=r("el-input"),n=r("el-form-item"),b=r("el-date-picker"),i=r("el-button"),y=r("el-form");return w(),v("div",x,[e[9]||(e[9]=k("h2",null,"预约挂号",-1)),l(y,{ref_key:"formRef",ref:d,model:t,rules:_,"label-width":"90px",class:"form","status-icon":""},{default:a(()=>[l(n,{label:"姓名",prop:"patientName"},{default:a(()=>[l(p,{modelValue:t.patientName,"onUpdate:modelValue":e[0]||(e[0]=o=>t.patientName=o),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号",prop:"phone"},{default:a(()=>[l(p,{modelValue:t.phone,"onUpdate:modelValue":e[1]||(e[1]=o=>t.phone=o),placeholder:"11位手机号"},null,8,["modelValue"])]),_:1}),l(n,{label:"科室",prop:"department"},{default:a(()=>[l(p,{modelValue:t.department,"onUpdate:modelValue":e[2]||(e[2]=o=>t.department=o),placeholder:"如：心内科"},null,8,["modelValue"])]),_:1}),l(n,{label:"医生"},{default:a(()=>[l(p,{modelValue:t.doctorId,"onUpdate:modelValue":e[3]||(e[3]=o=>t.doctorId=o),placeholder:"可选，填医生ID"},null,8,["modelValue"])]),_:1}),l(n,{label:"日期",prop:"appointmentDate"},{default:a(()=>[l(b,{modelValue:t.appointmentDate,"onUpdate:modelValue":e[4]||(e[4]=o=>t.appointmentDate=o),type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"时段"},{default:a(()=>[l(p,{modelValue:t.timeSlot,"onUpdate:modelValue":e[5]||(e[5]=o=>t.timeSlot=o),placeholder:"如：09:00-10:00"},null,8,["modelValue"])]),_:1}),l(n,{label:"症状描述"},{default:a(()=>[l(p,{modelValue:t.symptoms,"onUpdate:modelValue":e[6]||(e[6]=o=>t.symptoms=o),type:"textarea",rows:3,placeholder:"简要描述症状"},null,8,["modelValue"])]),_:1}),l(n,null,{default:a(()=>[l(i,{type:"primary",onClick:g,loading:m.value},{default:a(()=>[...e[7]||(e[7]=[c("提交预约",-1)])]),_:1},8,["loading"]),l(i,{onClick:s},{default:a(()=>[...e[8]||(e[8]=[c("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])}}},A=I(S,[["__scopeId","data-v-c44c7f47"]]);export{A as default};
